---
interface Props {
    page: string;
}

const { page } = Astro.props;
---

<header
    class="flex h-[86px] lg:h-[96px] px-[16px] lg:px-[40px] items-center justify-center w-full header__animate fixed z-50 bg-white"
>
    <div class="flex justify-between items-center w-full">
        <div class="flex items-center gap-[96px]">
            <a href="/">
                <img
                    src="https://firebasestorage.googleapis.com/v0/b/dev-system2023.appspot.com/o/360%2Flogo360-black.png?alt=media&token=9f3c6088-efe7-4c26-a1da-b6806082faeb"
                    alt="logo"
                    class="w-[90px] h-[56px] lg:w-[128.913px] lg:h-[80.01px]"
                />
            </a>
            <div class="hidden lg:flex items-start gap-[44px]">
                <a
                    href="/portfolio"
                    class=`font-primary text-[18px] not-italic font-medium leading-[normal] ${page == 'portfolio' ? 'text-blue-500 underline decoration-2' : ''}`
                    >Portafolio</a
                >
                <a
                    href="/"
                    class="font-primary text-[18px] not-italic font-medium leading-[normal]"
                    >Servicios</a
                >
            </div>
        </div>
        <div class="flex justify-center items-center">
            <button
                class="hidden lg:block px-[16px] py-[8px] bg-black text-white rounded-full"
                >CONTACTO</button
            >
            <button class="block lg:hidden" id="btn_open_header_mobile">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="12"
                    viewBox="0 0 18 12"
                    fill="none"
                >
                    <path
                        d="M0 12V10H18V12H0ZM0 7V5H18V7H0ZM0 2V0H18V2H0Z"
                        fill="#1C1B1F"></path>
                </svg>
            </button>
        </div>
    </div>
</header>
<div
    class="bg-white active_header_mobile fixed top-0 bottom-0 right-0 left-0 z-50 flex flex-col justify-between items-center px-[16px] pb-[16px]"
    id="header-mobile"
>
    <header class="flex h-[86px] items-center justify-center w-full bg-white">
        <div class="flex justify-between items-center w-full">
            <div class="flex items-center gap-[96px]">
                <img
                    src="https://firebasestorage.googleapis.com/v0/b/dev-system2023.appspot.com/o/360%2Flogo360-black.png?alt=media&token=9f3c6088-efe7-4c26-a1da-b6806082faeb"
                    alt="logo"
                    class="w-[90px] h-[56px] lg:w-[128.913px] lg:h-[80.01px]"
                />
            </div>
            <div class="flex justify-center items-center">
                <button id="btn_close_header_mobile">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="14"
                        height="14"
                        viewBox="0 0 14 14"
                        fill="none"
                    >
                        <path
                            d="M1.4 14L0 12.6L5.6 7L0 1.4L1.4 0L7 5.6L12.6 0L14 1.4L8.4 7L14 12.6L12.6 14L7 8.4L1.4 14Z"
                            fill="#1C1B1F"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>
    <div class="flex flex-col items-start gap-[16px]">
        <a
            href="/"
            class="font-primary text-[18px] not-italic font-medium leading-[normal]"
            >Portafolio</a
        >
        <a
            href="/"
            class="font-primary text-[18px] not-italic font-medium leading-[normal]"
            >Servicios</a
        >
    </div>
    <div class="w-full">
        <button
            class="px-[16px] py-[8px] bg-black text-white rounded-full w-full"
            >CONTACTO</button
        >
    </div>
</div>
<style>
    .active_header_mobile {
        display: none;
    }
</style>
<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);
    const showAnim = gsap
        .from(".header__animate", {
            yPercent: -100,
            paused: true,
            duration: 0.2,
        })
        .progress(1);

    ScrollTrigger.create({
        start: "top top-=70",
        end: "bottom bottom",
        onUpdate: (self) => {
            self.direction === -1 ? showAnim.play() : showAnim.reverse();
        },
    });

    const btnOpenHeaderMobile = document.getElementById(
        "btn_open_header_mobile"
    );
    btnOpenHeaderMobile?.addEventListener("click", () => {
        showHeaderMobile();
    });

    const btnCLoseHeaderMobile = document.getElementById(
        "btn_close_header_mobile"
    );
    btnCLoseHeaderMobile?.addEventListener("click", () => {
        showHeaderMobile();
    });

    const showHeaderMobile = () => {
        const headerMobile = document.getElementById("header-mobile");
        headerMobile?.classList.toggle("active_header_mobile");
    };
</script>
